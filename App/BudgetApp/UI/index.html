<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="container">
        <div class="card" id="result">
            <input class="input-element" id="username" type="text" placeholder="Enter the username" autocomplete="off" />
            <button id="retrieve" class="button-submit" onclick="getData()">Get user</button>
        </div>
    </div>
</body>
<script>
    var baseUrl ='http://localhost:3000/api/budget';
    async function getData() {
        try {
            const resp = await fetch(baseUrl, {
                method: 'GET', // *GET, POST, PUT, DELETE, etc.
                mode: 'cors', // no-cors, *cors, same-origin
                cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
                credentials: 'same-origin', // include, *same-origin, omit
                headers: {
                'Content-Type': 'application/json'
            },
            });
            console.log("RES Get Budget", await resp.json());
        } catch (e) {
            console.error("error getting budget");
        }
        
    }
    function getUser() {
        var request = new XMLHttpRequest();
        var username = document.querySelector('#username').value;

        request.open('GET','https://api.github.com/users/'+username);
        request.onload = function() {
            var data = JSON.parse(request.responseText);
            result.innerHTML = `
            <div class="row">
                <div class="col-3">
                    <img class="img-fluid" src="${ data.avatar_url }" />
                </div>
                <div class="col-9">
                    <h3 class="data-title">${ data.name }</h3>
                    <p class="data-text">Bio : ${ data.bio }</p>
                    <p class="data-text">Blog : ${ data.blog }</p>
                    <div style="margin-top: 16px">
                        <div class="data-badge">Repositories ${ data.public_repos }</div>
                        <div class="data-badge">Followers ${ data.followers }</div>
                        <div class="data-badge">Following ${ data.following }</div>
                    </div>
                    <div>
                        <button class="btn" onClick="window.open('${ data.html_url }');">View ${ data.name }'s profile</button>
                    </div>
                </div>
            </div>
            `;
        }
        console.log(request);
        request.send();
    }
    
</script>
</html>